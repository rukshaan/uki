define("OfficeFabric/components/Nav/Nav.base",["require","exports","tslib","react","../../Utilities","../../FocusZone","../../Button","../../Icon","./Nav.styles"],function(n,t,i,r,u,f,e,o,s){"use strict";function v(n){return!!n&&!/^[a-z0-9+-.]:\/\//i.test(n)}var l,a,c,h,y;Object.defineProperty(t,"__esModule",{value:!0});l=14;a=3;t.isRelativeUrl=v;h=u.classNamesFunction();y=function(n){function t(t){var i=n.call(this,t)||this,u,e,f;if(i._onRenderLink=function(n){var t=i.props,u=t.getStyles,f=t.groups,e=t.theme,o=h(u,{theme:e,groups:f});return r.createElement("div",{className:o.linkText},n.name)},i._renderGroup=function(n,t){var f=i.props,e=f.getStyles,s=f.groups,c=f.theme,u=h(e,{theme:c,isGroup:!0,isExpanded:!i.state.isGroupCollapsed[n.name],groups:s});return r.createElement("div",{key:t,className:u.group},n.name?r.createElement("button",{className:u.chevronButton,onClick:i._onGroupHeaderClicked.bind(i,n)},r.createElement(o.Icon,{className:u.chevronIcon,iconName:"ChevronDown"}),n.name):null,r.createElement("div",{className:u.groupContent},i._renderLinks(n.links,0)))},i.state={isGroupCollapsed:{},isLinkExpandStateChanged:!1,selectedKey:t.initialSelectedKey||t.selectedKey},t.groups)for(u=0,e=t.groups;u<e.length;u++)f=e[u],f.collapseByDefault&&f.name&&(i.state.isGroupCollapsed[f.name]=!0);return i}return i.__extends(t,n),t.prototype.componentWillReceiveProps=function(n){for(var t,e=n.groups||[],i=this.state.isGroupCollapsed,u=!1,r=0,f=e;r<f.length;r++)t=f[r],t.name&&t.collapseByDefault&&!i.hasOwnProperty(t.name)&&(i[t.name]=!0,u=!0);u&&this.setState({isGroupCollapsed:i})},t.prototype.render=function(){var n=this.props,e=n.getStyles,t=n.groups,o=n.className,s=n.isOnTop,c=n.theme,i,u;return t?(i=t.map(this._renderGroup),u=h(e,{theme:c,className:o,isOnTop:s,groups:t}),r.createElement(f.FocusZone,{direction:f.FocusZoneDirection.vertical},r.createElement("nav",{role:"navigation",className:u.root,"aria-label":this.props.ariaLabel},i))):null},Object.defineProperty(t.prototype,"selectedKey",{get:function(){return this.state.selectedKey},enumerable:!0,configurable:!0}),t.prototype._renderNavLink=function(n,t,i){var u=this.props,o=u.getStyles,c=u.groups,y=u.theme,f=u.onRenderLink,p=f===void 0?this._onRenderLink:f,w=h(o,{theme:y,isSelected:this._isLinkSelected(n),isButtonEntry:n.onClick&&!n.forceAnchor,leftPadding:l*i+a,groups:c}),b=n.url&&n.target&&!v(n.url)?"noopener noreferrer":undefined;return r.createElement(e.ActionButton,{className:w.link,styles:s.buttonStyles,href:n.url||(n.forceAnchor?"javascript:":undefined),iconProps:n.iconProps||{iconName:n.icon||""},ariaDescription:n.title||n.name,onClick:n.onClick?this._onNavButtonLinkClicked.bind(this,n):this._onNavAnchorLinkClicked.bind(this,n),title:n.title||n.name,target:n.target,rel:b,"aria-label":n.ariaLabel},p(n,this._onRenderLink))},t.prototype._renderCompositeLink=function(n,t,f){var c=i.__assign({},u.getNativeProps(n,u.divProperties,["onClick"])),e=this.props,a=e.getStyles,v=e.groups,y=e.theme,s=h(a,{theme:y,isExpanded:!!n.isExpanded,isSelected:this._isLinkSelected(n),isLink:!0,position:l*f+1,groups:v});return r.createElement("div",i.__assign({},c,{key:n.key||t,className:s.compositeLink}),n.links&&n.links.length>0?r.createElement("button",{className:s.chevronButton,onClick:this._onLinkExpandClicked.bind(this,n),"aria-label":this.props.expandButtonAriaLabel,"aria-expanded":n.isExpanded?"true":"false"},r.createElement(o.Icon,{className:s.chevronIcon,iconName:"ChevronDown"})):null,this._renderNavLink(n,t,f))},t.prototype._renderLink=function(n,t,i){var u=this.props,f=u.getStyles,e=u.groups,o=u.theme,s=h(f,{theme:o,groups:e});return r.createElement("li",{key:n.key||t,role:"listitem",className:s.navItem},this._renderCompositeLink(n,t,i),n.isExpanded?this._renderLinks(n.links,++i):null)},t.prototype._renderLinks=function(n,t){var u=this;if(!n||!n.length)return null;var f=n.map(function(n,i){return u._renderLink(n,i,t)}),i=this.props,e=i.getStyles,o=i.groups,s=i.theme,c=h(e,{theme:s,groups:o});return r.createElement("ul",{role:"list",className:c.navItems},f)},t.prototype._onGroupHeaderClicked=function(n,t){var i=this.state.isGroupCollapsed,r=n.name,u=!i[r];if(n.onHeaderClick)n.onHeaderClick(t,u);i[r]=u;this.setState({isGroupCollapsed:i});t.preventDefault();t.stopPropagation()},t.prototype._onLinkExpandClicked=function(n,t){var i=this.props.onLinkExpandClick;i&&i(t,n);t.defaultPrevented||(n.isExpanded=!n.isExpanded,this.setState({isLinkExpandStateChanged:!0}));t.preventDefault();t.stopPropagation()},t.prototype._onNavAnchorLinkClicked=function(n,t){if(this.props.onLinkClick)this.props.onLinkClick(t,n);!n.url&&n.links&&n.links.length>0&&this._onLinkExpandClicked(n,t);this.setState({selectedKey:n.key})},t.prototype._onNavButtonLinkClicked=function(n,t){if(n.onClick)n.onClick(t,n);!n.url&&n.links&&n.links.length>0&&this._onLinkExpandClicked(n,t);this.setState({selectedKey:n.key})},t.prototype._isLinkSelected=function(n){if(this.props.selectedKey!==undefined)return n.key===this.props.selectedKey;if(this.state.selectedKey!==undefined&&n.key===this.state.selectedKey)return!0;if(typeof window=="undefined"||!n.url)return!1;c=c||document.createElement("a");c.href=n.url||"";var t=c.href;return location.href===t?!0:location.protocol+"//"+location.host+location.pathname===t?!0:location.hash?location.hash===n.url?!0:(c.href=location.hash.substring(1),c.href===t):!1},t.defaultProps={groups:null},i.__decorate([u.customizable("Nav",["theme"])],t)}(u.BaseComponent);t.NavBase=y});

